import{z as e}from"zod";import{WalletAddress as t,SolanaWalletAddress as s,Email as o,PhoneNumber as a,UserId as n}from"./core.mjs";import{EmbeddedWalletCreationInput as c}from"./embedded-wallet-creation.mjs";import{CustomMetadata as r}from"./user.mjs";import"bs58";import"libphonenumber-js/max";import"viem";import"./wallet-api/wallets.mjs";import"@privy-io/api-base";import"./api.mjs";import"./transaction.mjs";import"./wallet-api/export.mjs";import"./smart-wallet-config.mjs";import"../constants/smart-wallets.mjs";const u=e.object({type:e.literal("wallet"),address:e.union([t,s]),chain_type:e.enum(["ethereum","solana"])}),i=e.object({type:e.literal("email"),address:o}),l=e.object({type:e.literal("phone"),number:a}),m=e.object({type:e.literal("google_oauth"),subject:e.string().regex(/^[\x00-\x7F]{1,256}$/),email:o,name:e.string()}).strict(),d=e.object({type:e.literal("twitter_oauth"),subject:e.string().regex(/^[\x00-\x7F]{1,256}$/),name:e.string().min(1).max(50),username:e.string().regex(/^[0-9a-zA-Z|\_]{1,15}$/),profile_picture_url:e.string().url().refine((e=>e.startsWith("https://abs.twimg.com/sticky/default_profile_images/")||e.startsWith("https://pbs.twimg.com/profile_images/"))).optional()}).strict(),p=e.object({type:e.literal("discord_oauth"),subject:e.string().regex(/^[\x00-\x7F]{1,256}$/),username:e.string().regex(/^(?!discord|everyone|here)[0-9a-zA-Z_.]{2,32}(?:#(?:[0-9]{4}|0))?$/).transform((e=>e.includes("#")?e:`${e}#0`)),email:o.optional()}).strict(),h=e.object({type:e.literal("spotify_oauth"),subject:e.string(),name:e.string().optional(),email:o.optional()}).strict(),_=e.object({type:e.literal("github_oauth"),subject:e.string().regex(/^[\x00-\x7F]{1,256}$/),username:e.string().regex(/^[a-zA-Z0-9]+(?:-[a-zA-Z0-9]+)*$/).max(39),name:e.string().optional(),email:o.optional()}).strict(),g=e.object({type:e.literal("instagram_oauth"),subject:e.string().regex(/^[\x00-\x7F]{1,256}$/),username:e.string().regex(/^(?!instagram|everyone|here)[0-9a-zA-Z._]{2,32}$/)}).strict(),b=e.object({type:e.literal("tiktok_oauth"),subject:e.string().regex(/^[\x00-\x7F]{1,256}$/),username:e.string().regex(/^(?!tiktok|everyone|here)[0-9a-zA-Z]{2,32}$/),name:e.string().min(1).max(30).nullable()}).strict(),A=e.object({type:e.literal("line_oauth"),subject:e.string().regex(/^[\x00-\x7F]{1,256}$/),email:o.optional(),name:e.string().min(1).max(30).optional(),profile_picture_url:e.string().url().refine((e=>e.startsWith("https://")),{message:"Profile picture URL must start with https://"}).optional()}).strict(),x=e.object({type:e.literal("linkedin_oauth"),subject:e.string().regex(/^[\x00-\x7F]{1,256}$/),name:e.string().optional(),email:o.optional(),vanityName:e.string().optional()}).strict(),w=e.object({type:e.literal("apple_oauth"),subject:e.string().regex(/^[\x00-\x7F]{1,256}$/),email:o.optional()}).strict(),f=e.object({type:e.literal("farcaster"),fid:e.number().int(),owner_address:t,username:e.string().max(256).optional(),display_name:e.string().max(32).optional(),bio:e.string().max(256).optional(),profile_picture_url:e.string().max(256).optional(),homepage_url:e.string().max(256).optional()}).strict(),I=e.object({type:e.literal("telegram"),telegram_user_id:e.string().min(1).max(255),first_name:e.string().max(255).optional(),last_name:e.string().max(255).optional(),username:e.string().max(255).optional(),photo_url:e.string().max(255).optional()}).strict(),k=e.object({type:e.literal("custom_auth"),custom_user_id:e.string().min(1).max(256)}).strict(),j=e.discriminatedUnion("type",[u,i,l,m,d,p,_,h,g,b,A,w,x,f,I,k]);let y=j.array().min(1).transform((e=>{let t={emailAccounts:[],phoneAccounts:[],ethereumAccounts:[],solanaAccounts:[],googleAccounts:[],twitterAccounts:[],discordAccounts:[],githubAccounts:[],spotifyAccounts:[],instagramAccounts:[],tiktokAccounts:[],lineAccounts:[],linkedinAccounts:[],appleAccounts:[],farcasterAccounts:[],telegramAccounts:[],customJwtAccounts:[]};for(let s of e)switch(s.type){case"wallet":"ethereum"===s.chain_type&&t.ethereumAccounts.push(s),"solana"===s.chain_type&&t.solanaAccounts.push(s);break;case"email":t.emailAccounts.push(s);break;case"phone":t.phoneAccounts.push(s);break;case"google_oauth":t.googleAccounts.push(s);break;case"twitter_oauth":t.twitterAccounts.push(s);break;case"discord_oauth":t.discordAccounts.push(s);break;case"github_oauth":t.githubAccounts.push(s);break;case"spotify_oauth":t.spotifyAccounts.push(s);break;case"instagram_oauth":t.instagramAccounts.push(s);break;case"tiktok_oauth":t.tiktokAccounts.push(s);break;case"line_oauth":t.lineAccounts.push(s);break;case"linkedin_oauth":t.linkedinAccounts.push(s);break;case"apple_oauth":t.appleAccounts.push(s);break;case"farcaster":t.farcasterAccounts.push(s);break;case"telegram":t.telegramAccounts.push(s);break;case"custom_auth":t.customJwtAccounts.push(s)}return t})).superRefine(((t,s)=>{t.emailAccounts&&t.emailAccounts.length>1&&s.addIssue({code:e.ZodIssueCode.custom,message:"User cannot have more than one email account."}),t.phoneAccounts&&t.phoneAccounts.length>1&&s.addIssue({code:e.ZodIssueCode.custom,message:"User cannot have more than one phone number account."}),t.googleAccounts&&t.googleAccounts.length>1&&s.addIssue({code:e.ZodIssueCode.custom,message:"User cannot have more than one Google account."}),t.linkedinAccounts&&t.linkedinAccounts.length>1&&s.addIssue({code:e.ZodIssueCode.custom,message:"User cannot have more than one LinkedIn account."}),t.twitterAccounts&&t.twitterAccounts.length>1&&s.addIssue({code:e.ZodIssueCode.custom,message:"User cannot have more than one Twitter account."}),t.discordAccounts&&t.discordAccounts.length>1&&s.addIssue({code:e.ZodIssueCode.custom,message:"User cannot have more than one Discord account."}),t.githubAccounts&&t.githubAccounts.length>1&&s.addIssue({code:e.ZodIssueCode.custom,message:"User cannot have more than one GitHub account."}),t.tiktokAccounts&&t.tiktokAccounts.length>1&&s.addIssue({code:e.ZodIssueCode.custom,message:"User cannot have more than one Tiktok account."}),t.lineAccounts&&t.lineAccounts.length>1&&s.addIssue({code:e.ZodIssueCode.custom,message:"User cannot have more than one Line account."}),t.spotifyAccounts&&t.spotifyAccounts.length>1&&s.addIssue({code:e.ZodIssueCode.custom,message:"User cannot have more than one Spotify account."}),t.instagramAccounts&&t.instagramAccounts.length>1&&s.addIssue({code:e.ZodIssueCode.custom,message:"User cannot have more than one Instagram account."}),t.appleAccounts&&t.appleAccounts.length>1&&s.addIssue({code:e.ZodIssueCode.custom,message:"User cannot have more than one Apple account."}),t.farcasterAccounts&&t.farcasterAccounts.length>1&&s.addIssue({code:e.ZodIssueCode.custom,message:"User cannot have more than one Farcaster account."}),t.telegramAccounts&&t.telegramAccounts.length>1&&s.addIssue({code:e.ZodIssueCode.custom,message:"User cannot have more than one Telegram account."}),t.customJwtAccounts&&t.customJwtAccounts.length>0&&t.customJwtAccounts.length>1&&s.addIssue({code:e.ZodIssueCode.custom,message:"User cannot have more than one custom JWT account."})}));const Z=e.object({create_embedded_wallet:e.boolean().optional(),create_n_embedded_wallets:e.number().min(1).max(10).optional(),create_n_ethereum_wallets:e.number().min(1).max(10).optional(),create_ethereum_wallet:e.boolean().optional(),create_solana_wallet:e.boolean().optional(),create_ethereum_smart_wallet:e.boolean().optional()}).strict(),v=c.merge(Z),C=v.extend({linked_accounts:y,custom_metadata:r.optional()}).superRefine(((t,s)=>{void 0!==t.create_embedded_wallet&&void 0!==t.create_n_ethereum_wallets&&s.addIssue({code:e.ZodIssueCode.custom,message:"create_embedded_wallet is deprecated, use create_ethereum_wallet instead"}),void 0!==t.create_ethereum_wallet&&void 0!==t.create_n_embedded_wallets&&s.addIssue({code:e.ZodIssueCode.custom,message:"create_n_embedded_wallets is deprecated, use create_n_ethereum_wallets instead"}),t.create_ethereum_smart_wallet&&!t.create_ethereum_wallet&&s.addIssue({code:e.ZodIssueCode.custom,message:"create_ethereum_smart_wallet requires create_ethereum_wallet to be true"})})),U=e.object({users:C.array().max(20)}),$=e.object({create_ethereum_wallet:e.boolean().optional(),number_of_ethereum_wallets_to_create:e.number().min(1).max(10).optional(),create_ethereum_smart_wallet:e.boolean().optional(),create_solana_wallet:e.boolean().optional()}).strict();let F=(t,s)=>{t.create_ethereum_smart_wallet&&!t.create_ethereum_wallet&&s.addIssue({code:e.ZodIssueCode.custom,message:"create_ethereum_smart_wallet requires create_ethereum_wallet to be true"}),!t.create_ethereum_wallet&&t.number_of_ethereum_wallets_to_create&&s.addIssue({code:e.ZodIssueCode.custom,message:"create_ethereum_wallet must be true if number_of_ethereum_wallets_to_create is specified"})},z=c.merge($);const J=z.extend({user_id:n}).superRefine(F),R=z.superRefine(F);export{Z as CreateEmbeddedWalletUserImportInput,$ as CreateWalletInput,v as EmbeddedWalletCreationInputUnion,w as ImportAppleAccountInput,k as ImportCustomJwtAccountInput,p as ImportDiscordAccountInput,i as ImportEmailAccountInput,f as ImportFarcasterAccountInput,_ as ImportGithubAccountInput,m as ImportGoogleAccountInput,g as ImportInstagramAccountInput,A as ImportLineAccountInput,x as ImportLinkedInAccountInput,U as ImportManyUsersInput,l as ImportPhoneAccountInput,h as ImportSpotifyAccountInput,I as ImportTelegramAccountInput,b as ImportTiktokAccountInput,d as ImportTwitterAccountInput,C as ImportUserInput,u as ImportWalletAccountInput,j as LinkedAccountInput,J as WalletCreateUserInput,R as WalletCreateUserInputWithoutUserId};
