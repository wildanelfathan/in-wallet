import{z as e}from"zod";import{WalletAddress as t}from"./core.mjs";import{SmartWalletProvider as i}from"./smart-wallet-config.mjs";import{CurveSigningChainTypes as r}from"./wallet-api/wallets.mjs";import"bs58";import"libphonenumber-js/max";import"viem";import"../constants/smart-wallets.mjs";import"@privy-io/api-base";import"./api.mjs";import"./transaction.mjs";import"./wallet-api/export.mjs";const l=e.object({type:e.literal("email"),address:e.string(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),n=e.object({type:e.literal("phone"),number:e.string().optional(),phoneNumber:e.string(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),a=e.object({type:e.enum(["wallet","smart_wallet"]),address:e.string(),chain_type:e.enum(["solana","ethereum"])}),s=e.object({type:e.literal("wallet"),address:e.string(),chain_id:e.string().optional(),chain_type:e.literal("ethereum"),wallet_client:e.literal("unknown"),wallet_client_type:e.string().optional(),connector_type:e.string().optional(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),o=e.object({type:e.literal("smart_wallet"),address:e.string(),smart_wallet_type:i,verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),u=e.object({type:e.literal("wallet"),address:e.string(),chain_type:e.literal("solana"),wallet_client:e.literal("unknown"),wallet_client_type:e.string().optional(),connector_type:e.string().optional(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),_=e.object({type:e.literal("farcaster"),fid:e.number(),owner_address:t,username:e.string().optional(),display_name:e.string().optional(),bio:e.string().optional(),profile_picture:e.string().optional(),profile_picture_url:e.string().optional(),homepage_url:e.string().optional(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable(),signer_public_key:e.string().optional()}),b=e.object({type:e.literal("passkey"),created_with_browser:e.string().optional(),created_with_os:e.string().optional(),created_with_device:e.string().optional(),credential_id:e.string(),authenticator_name:e.string().optional(),enrolled_in_mfa:e.boolean(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),m=e.object({type:e.literal("telegram"),telegram_user_id:e.string(),first_name:e.string().nullish(),last_name:e.string().nullish(),username:e.string().nullish(),photo_url:e.string().nullish(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}).transform((e=>({...e,telegramUserId:e.telegram_user_id,firstName:e.first_name})));let d=e.enum(["privy","user-passcode","google-drive","icloud","recovery-encryption-key","privy-v2"]),p=e.object({id:e.string().nullable().default(null),type:e.literal("wallet"),address:e.string(),imported:e.boolean().default(!1),delegated:e.boolean().default(!1),wallet_index:e.number(),chain_id:e.string(),chain_type:e.string(),wallet_client:e.literal("privy"),wallet_client_type:e.literal("privy"),connector_type:e.literal("embedded"),recovery_method:d,verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()});const c=p.merge(e.object({chain_type:e.literal("ethereum")})),g=p.merge(e.object({chain_type:e.literal("solana"),public_key:e.string()})),f=p.merge(e.object({chain_type:e.literal("bitcoin-segwit"),public_key:e.string()})),v=p.merge(e.object({chain_type:e.literal("bitcoin-taproot"),public_key:e.string()})),y=p.merge(e.object({chain_type:r}));let j=e.object({id:e.string(),recovery_method:e.literal("privy-v2")});const h=e.union([c.merge(j),g.merge(j),f.merge(j),v.merge(j),y.merge(j)]),k=e.object({type:e.literal("google_oauth"),subject:e.string(),email:e.string(),name:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),w=e.object({type:e.literal("twitter_oauth"),subject:e.string(),username:e.string().nullable(),name:e.string().nullable(),profile_picture_url:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),x=e.object({type:e.literal("discord_oauth"),subject:e.string(),username:e.string().nullable(),email:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),z=e.object({type:e.literal("github_oauth"),subject:e.string(),username:e.string().nullable(),name:e.string().nullable(),email:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),N=e.object({type:e.literal("linkedin_oauth"),subject:e.string(),name:e.string().optional(),email:e.string().nullable(),vanity_name:e.string().optional(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),I=e.object({type:e.literal("spotify_oauth"),subject:e.string(),email:e.string().nullable(),name:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),U=e.object({type:e.literal("instagram_oauth"),subject:e.string(),username:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),V=e.object({type:e.literal("tiktok_oauth"),subject:e.string(),username:e.string().nullable(),name:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),q=e.object({type:e.literal("line_oauth"),subject:e.string(),name:e.string().nullable(),email:e.string().nullable(),profile_picture_url:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),A=e.object({type:e.literal("apple_oauth"),subject:e.string(),email:e.string().nullable(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),B=e.object({type:e.literal("custom_auth"),custom_user_id:e.string(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),C=e.object({address:e.string()}),D=e.object({address:e.string()}),E=e.object({type:e.literal("cross_app"),subject:e.string(),provider_app_id:e.string(),embedded_wallets:e.array(C),smart_wallets:e.array(D),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),F=e.object({type:e.literal("authorization_key"),public_key:e.string(),verified_at:e.number(),first_verified_at:e.number().nullable(),latest_verified_at:e.number().nullable()}),G=e.union([l,n,s,u,o,c,g,f,v,y,k,w,x,z,I,U,V,q,N,A,B,_,b,m,E,F]),H=e.object({type:e.literal("sms"),verified_at:e.number()}),J=e.object({type:e.literal("totp"),verified_at:e.number()}),K=e.object({type:e.literal("passkey"),verified_at:e.number()}),L=e.union([H,J,K]),M=e.record(e.string(),e.union([e.string(),e.number(),e.boolean()])),O=e.object({provider:e.string(),access_token:e.string(),access_token_expires_in_seconds:e.number().optional(),refresh_token:e.string().optional(),refresh_token_expires_in_seconds:e.number().optional(),scopes:e.array(e.string()).optional()}),P=e.object({id:e.string(),linked_accounts:e.array(G),mfa_methods:e.array(L),created_at:e.number(),has_accepted_terms:e.boolean(),is_guest:e.boolean(),custom_metadata:M.optional()}),Q=e.enum(["set","ignore","clear"]),R=e.object({user:P,identity_token:e.string().min(1).nullable()}),S=e.object({user:P,token:e.string().min(1).nullable(),privy_access_token:e.string().min(1).nullable(),refresh_token:e.string().min(1).nullable(),identity_token:e.string().min(1).optional(),is_new_user:e.boolean().optional(),oauth_tokens:O.optional(),oauth_provider_tokens:e.object({provider:e.string(),access_token:e.string(),access_token_expires_in_seconds:e.number().optional(),refresh_token:e.string().optional(),scopes:e.array(e.string()).optional()}).optional(),session_update_action:Q}),T=e.object({user:e.null(),token:e.null(),refresh_token:e.null(),session_update_action:e.literal(Q.Values.clear)}),W=e.union([S,T]);export{A as AppleOauthAccount,S as AuthenticatedUser,F as AuthorizationKeyAccount,a as BaseWalletAccount,f as BitcoinSegwitEmbeddedWalletAccount,v as BitcoinTaprootEmbeddedWalletAccount,E as CrossAppAccount,C as CrossAppEmbeddedWallet,D as CrossAppSmartWallet,y as CurveSigningEmbeddedWalletAccount,B as CustomJwtAccount,M as CustomMetadata,x as DiscordOauthAccount,l as EmailAccount,s as EthereumAccount,c as EthereumEmbeddedWalletAccount,_ as FarcasterAccount,z as GithubOauthAccount,k as GoogleOauthAccount,U as InstagramOauthAccount,q as LineOauthAccount,G as LinkedAccount,N as LinkedInOauthAccount,L as LinkedMfaMethod,T as LoggedOutUser,W as MaybeUser,O as OAuthTokens,b as PasskeyAccount,K as PasskeyMfaMethod,n as PhoneAccount,Q as SessionUpdateActionEnum,o as SmartWalletAccount,H as SmsMfaMethod,u as SolanaAccount,g as SolanaEmbeddedWalletAccount,I as SpotifyOauthAccount,m as TelegramAccount,V as TiktokOauthAccount,J as TotpMfaMethod,w as TwitterOauthAccount,h as UnifiedWalletAccount,P as User,R as UserWithIdentityToken};
